ECEN 5813 Principles Of Embedded Softwares : Project 1

Authors: Harsimransingh, Smitesh Modak

Date: 10/3/2017

Supported Platforms: HOST LINUX-Ubuntu, BeagleBone Black, Freedom Freescale KL25Z

Goals:
1. Getting familiar with Build System using GCC
2. Making softwares which are developed to be architecture independent
3. Compilation for 3 different platforms


Requirements for Build system and Makefile:

1. Flags:
-Werror = Converts all warnings to errors
-g = Produces debugging informatiion in OS's native format.
-Wall = Used to enable warning messages
-O0 = Used to optimize for compilation time
-std=c99 = Compatible with c99 standard
-mcpu=cortex-m0plus = Architecture specific flag for Freedom Freescale Board
-mcpu=cortex-a8 = Architecture specific flag for BeagleBone Black
-I = To include folder names in the recipe to find required prerequisites
-CC = Enables us to include cross and native compilers
-CFLAGS = Enables us to add flags to recipe
-M = To create dependency file
-mfloat-abi=hard =  
-mfpu =
-mthumb =
-Wl =
--specs=nosys.specs =
-mfpu=fpv4-sp-d16 =
-mfloat-abi=soft =
 
2. Utilities:
-size = To see the size of the object file in decimal and hex
-ar = Used to create archive for files like a static library
-ld = Used to invoke linker without gcc

3. Outputs:
.map = -Map flag used to create map file
.dep = Using -M flag options to create dependency file
.elf = Target executable file made using object files
.o = Individual object file made with .c files

4. PHONY:
.PHONY protection required for all target files.

Target Specifications used were:

1. %i: This target is used to create preprocessed output for a specific source file.
   example command : make memory.i
   
2. %.asm : This target is used to create assembly output for a specific source file.
   example command : make memory.asm
   
3. %.o : This target is used to create object file of the specified c file. The file is not linked.
   example command : make filename.o
   
4. compile-all : Used to generate object files for all the source files without linking them. 
   example command : make compile-all
  
5. build : This target is used to compile and link source file and then create an executable file and a map file.
   command : make build
   
6. clean : This target is used to clean all the files generated by make.
   command : make clean

8. TARGET : This target is used to create executable file using all .o files.
    command : make TARGET
	
9. build-lib : This target is used generate a library of memory.o data.o and project1.o into an archive called libproject1.a. Makes use of ar.
    command : make build-lib
	
Using Compile time switch "PLATFORM":
It is used to set the platform for which we want to run the commands.
The platforms are HOST LINUX-Ubuntu, Freedom Freescale KL25Z, BeagleBone Black.
The default platform is HOST LINUX-Ubuntu.

Using Compile time switch "PROJECT1-SW":
Compilation of project1 switched on only when ON is written to "PROJECT1-SW" using command line.
The default value is OFF. When "PROJECT1-SW" is ON the variable PROJECT1 is defined.

Using Compile time switch "DEBUG":
This switch is used to set the VERBOSE flag which allows the code to print certain values which help for debugging.

Dependencies:
1. All .c files are present in src folder.
2. common .h files are present in includes/common folder.
3. sources.mk and Makefile are present in src folder
4. .h files for KL25Z are present in includes/CMSIS folder and includes/KL25Z folder
5. Linker file is present in platform folder
